AS2017 Документация для часов на лампах ИН-14
От: Неизвестных Александр Сергеевич 27 июня 2017 г. 20:26

Коллеги, приветствую!

По многочисленным просьбам выкладываю документацию и исходники для сборки и программирования часов. Прошу предоставить ее участникам!

Описание доработок:

1. Необходимо заменить кварцевый резонатор 8 МГц на 14.7456 МГц, можно и 16 МГц но тут придется адаптировать код. Так же можно оставить кварц на 8, но светодиоды с пиксельной адресацией работать не будут, у них все жестко завязано на таймингах (поправьте меня если я не прав).

2. Докупить и впаять кварц на 32768 Гц, в спецификации и ИЛ он указан, я брал в ЧИП и ДИПе.

3. При отладке лучше впаять супрессор на 200-220В параллельно высоковольтному конденсатору, чтобы в случае чего не пожечь диод и транзистор, двух каскадный DC-DC раскачивает напругу очень сильно.

4. Вход драйвера для полевика, нужно подтянуть к земле через резистор, в процессе проверки оказалось что если не подтянуть то возможно самовозбуждение, у меня в эталонном образце такого не наблюдалось, поэтому и не было исправлено, а в PDF-ке не указано сопротивление внутренней подтяжки (при измерении оказалось около 1 Мега Ома).

5. Программировать можно через JTAG (я так программировал), и ISP (разводку сделал, но не пробовал).

В исходнике реализовано:

1. Собственно запуск и ход часов.

2. Настройка времени.Вход в настройку удерживанием кнопки "ENTER" в течении 2 секунд, далее при нажатии кнопок "+" и "-" осуществляется выбор сегментов, после выбора сегментов нажатие на кнопку "ENTER" позволяет изменять время, выход из настройки либо кнопкой "EXIT" или по тайм ауту, через 2 минуты.

3. Настройка подсветки. Вход в настройку удерживанием кнопки "+", далее при нажатии кнопок "+" и "-" осуществляется регулировка цвета, выбор цвета осуществляется кнопкой "ENTER", выход из настройки либо кнопкой "EXIT" или по тайм ауту, через 2 минуты.

В планах было запустить:

1. Режим будильника.

2. Датчик абсолютного давления.

3. Датчик температуры.

4. Автозагрузчик (для этого прикрутил FT232).

5. Разнообразные цветовые гаммы.

Если есть энтузиасты, прошу дописать прошивку, где будет все реализовано, у меня уже на это не будет свободного времени (нужно разрабатывать новые задания).

Вроде ничего не упустил, будут вопросы, пишите, отвечу по возможности.

За стиль и структуру исходника не пинайте.